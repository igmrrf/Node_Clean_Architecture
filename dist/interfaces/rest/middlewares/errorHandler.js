"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true,
});
var tslib_1 = require("tslib");
/**
 * Error handling middleware
 */
var util_1 = tslib_1.__importDefault(require("util"));
var fs_1 = tslib_1.__importDefault(require("fs"));
var http_status_codes_1 = tslib_1.__importDefault(require("http-status-codes"));
var logger_1 = tslib_1.__importDefault(require("../../../base/logger"));
var ResponseBuilder_1 = tslib_1.__importDefault(require("../response/ResponseBuilder"));
var unlink = util_1.default.promisify(fs_1.default.unlink);
// eslint-disable-next-line no-unused-vars
exports.default = function (err, req, res, next) {
  return tslib_1.__awaiter(void 0, void 0, void 0, function () {
    var file, files, path, uploads, removeFilesFromDisk, errorMessage, errorData;
    return tslib_1.__generator(this, function (_a) {
      switch (_a.label) {
        case 0:
          if (!err.isOperationalError) {
            logger_1.default.error("An error occurred: ", {
              error: err.message || err.toString(),
              stack: err.stack,
            });
          }
          (file = req.file), (files = req.files);
          if (!file) return [3 /*break*/, 2];
          path = file.path;
          if (!file.path) return [3 /*break*/, 2];
          if (!fs_1.default.existsSync(path)) return [3 /*break*/, 2];
          return [4 /*yield*/, unlink(path)];
        case 1:
          _a.sent();
          _a.label = 2;
        case 2:
          if (!(files && Object.values(files).length)) return [3 /*break*/, 4];
          uploads = Object.values(files);
          removeFilesFromDisk = uploads.map(function (entry) {
            // eslint-disable-next-line
            var filesToRemove = entry.map(function (upload) {
              if (fs_1.default.existsSync(upload.path)) {
                return unlink(upload.path);
              }
            });
            return filesToRemove;
          });
          return [4 /*yield*/, Promise.all(removeFilesFromDisk)];
        case 3:
          _a.sent();
          _a.label = 4;
        case 4:
          if (err.name || err.error) {
            if (err.name === "ValidationError" || (err.error && err.error.name === "ValidationError")) {
              return [
                2 /*return*/,
                ResponseBuilder_1.default
                  .getResponseHandler(res)
                  .onError(
                    err.name || err.error.name,
                    http_status_codes_1.default.BAD_REQUEST,
                    err.message || err.error.toString(),
                    err.errors || err.error.details,
                  ),
              ];
            }
            return [
              2 /*return*/,
              ResponseBuilder_1.default
                .getResponseHandler(res)
                .onError(err.name, err.status, err.message, err.data),
            ];
          }
          errorMessage = process.env.NODE_ENV === "production" ? "Something bad happened!" : err.message;
          errorData = process.env.NODE_ENV === "production" ? {} : err;
          return [
            2 /*return*/,
            ResponseBuilder_1.default
              .getResponseHandler(res)
              .onError(
                "InternalServerError",
                err.status || http_status_codes_1.default.INTERNAL_SERVER_ERROR,
                errorMessage,
                errorData,
              ),
          ];
      }
    });
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInRzbGliXzEiLCJyZXF1aXJlIiwidXRpbF8xIiwiX19pbXBvcnREZWZhdWx0IiwiZnNfMSIsImh0dHBfc3RhdHVzX2NvZGVzXzEiLCJsb2dnZXJfMSIsIlJlc3BvbnNlQnVpbGRlcl8xIiwidW5saW5rIiwiZGVmYXVsdCIsInByb21pc2lmeSIsImVyciIsInJlcSIsInJlcyIsIm5leHQiLCJfX2F3YWl0ZXIiLCJmaWxlIiwiZmlsZXMiLCJwYXRoIiwidXBsb2FkcyIsInJlbW92ZUZpbGVzRnJvbURpc2siLCJlcnJvck1lc3NhZ2UiLCJlcnJvckRhdGEiLCJfX2dlbmVyYXRvciIsIl9hIiwibGFiZWwiLCJpc09wZXJhdGlvbmFsRXJyb3IiLCJlcnJvciIsIm1lc3NhZ2UiLCJ0b1N0cmluZyIsInN0YWNrIiwiZXhpc3RzU3luYyIsInNlbnQiLCJ2YWx1ZXMiLCJsZW5ndGgiLCJtYXAiLCJlbnRyeSIsImZpbGVzVG9SZW1vdmUiLCJ1cGxvYWQiLCJQcm9taXNlIiwiYWxsIiwibmFtZSIsImdldFJlc3BvbnNlSGFuZGxlciIsIm9uRXJyb3IiLCJCQURfUkVRVUVTVCIsImVycm9ycyIsImRldGFpbHMiLCJzdGF0dXMiLCJkYXRhIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiSU5URVJOQUxfU0VSVkVSX0VSUk9SIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vdHlwZWQvaW50ZXJmYWNlcy9yZXN0L21pZGRsZXdhcmVzL2Vycm9ySGFuZGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciB0c2xpYl8xID0gcmVxdWlyZShcInRzbGliXCIpO1xuLyoqXG4gKiBFcnJvciBoYW5kbGluZyBtaWRkbGV3YXJlXG4gKi9cbnZhciB1dGlsXzEgPSB0c2xpYl8xLl9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwidXRpbFwiKSk7XG52YXIgZnNfMSA9IHRzbGliXzEuX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJmc1wiKSk7XG52YXIgaHR0cF9zdGF0dXNfY29kZXNfMSA9IHRzbGliXzEuX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJodHRwLXN0YXR1cy1jb2Rlc1wiKSk7XG52YXIgbG9nZ2VyXzEgPSB0c2xpYl8xLl9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiYmFzZS9sb2dnZXJcIikpO1xudmFyIFJlc3BvbnNlQnVpbGRlcl8xID0gdHNsaWJfMS5fX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL3Jlc3BvbnNlL1Jlc3BvbnNlQnVpbGRlclwiKSk7XG52YXIgdW5saW5rID0gdXRpbF8xLmRlZmF1bHQucHJvbWlzaWZ5KGZzXzEuZGVmYXVsdC51bmxpbmspO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG5leHBvcnRzLmRlZmF1bHQgPSAoZnVuY3Rpb24gKGVyciwgcmVxLCByZXMsIG5leHQpIHsgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZmlsZSwgZmlsZXMsIHBhdGgsIHVwbG9hZHMsIHJlbW92ZUZpbGVzRnJvbURpc2ssIGVycm9yTWVzc2FnZSwgZXJyb3JEYXRhO1xuICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgaWYgKCFlcnIuaXNPcGVyYXRpb25hbEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlcl8xLmRlZmF1bHQuZXJyb3IoXCJBbiBlcnJvciBvY2N1cnJlZDogXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnIubWVzc2FnZSB8fCBlcnIudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrOiBlcnIuc3RhY2ssXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaWxlID0gcmVxLmZpbGUsIGZpbGVzID0gcmVxLmZpbGVzO1xuICAgICAgICAgICAgICAgIGlmICghZmlsZSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XG4gICAgICAgICAgICAgICAgcGF0aCA9IGZpbGUucGF0aDtcbiAgICAgICAgICAgICAgICBpZiAoIWZpbGUucGF0aCkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XG4gICAgICAgICAgICAgICAgaWYgKCFmc18xLmRlZmF1bHQuZXhpc3RzU3luYyhwYXRoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XG4gICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdW5saW5rKHBhdGgpXTtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIGlmICghKGZpbGVzICYmIE9iamVjdC52YWx1ZXMoZmlsZXMpLmxlbmd0aCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgIHVwbG9hZHMgPSBPYmplY3QudmFsdWVzKGZpbGVzKTtcbiAgICAgICAgICAgICAgICByZW1vdmVGaWxlc0Zyb21EaXNrID0gdXBsb2Fkcy5tYXAoZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZXNUb1JlbW92ZSA9IGVudHJ5Lm1hcChmdW5jdGlvbiAodXBsb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnNfMS5kZWZhdWx0LmV4aXN0c1N5bmModXBsb2FkLnBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVubGluayh1cGxvYWQucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsZXNUb1JlbW92ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBQcm9taXNlLmFsbChyZW1vdmVGaWxlc0Zyb21EaXNrKV07XG4gICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNDtcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICBpZiAoZXJyLm5hbWUgfHwgZXJyLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIubmFtZSA9PT0gXCJWYWxpZGF0aW9uRXJyb3JcIiB8fCAoZXJyLmVycm9yICYmIGVyci5lcnJvci5uYW1lID09PSBcIlZhbGlkYXRpb25FcnJvclwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFJlc3BvbnNlQnVpbGRlcl8xLmRlZmF1bHQuZ2V0UmVzcG9uc2VIYW5kbGVyKHJlcykub25FcnJvcihlcnIubmFtZSB8fCBlcnIuZXJyb3IubmFtZSwgaHR0cF9zdGF0dXNfY29kZXNfMS5kZWZhdWx0LkJBRF9SRVFVRVNULCBlcnIubWVzc2FnZSB8fCBlcnIuZXJyb3IudG9TdHJpbmcoKSwgZXJyLmVycm9ycyB8fCBlcnIuZXJyb3IuZGV0YWlscyldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBSZXNwb25zZUJ1aWxkZXJfMS5kZWZhdWx0LmdldFJlc3BvbnNlSGFuZGxlcihyZXMpLm9uRXJyb3IoZXJyLm5hbWUsIGVyci5zdGF0dXMsIGVyci5tZXNzYWdlLCBlcnIuZGF0YSldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIgPyBcIlNvbWV0aGluZyBiYWQgaGFwcGVuZWQhXCIgOiBlcnIubWVzc2FnZTtcbiAgICAgICAgICAgICAgICBlcnJvckRhdGEgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIgPyB7fSA6IGVycjtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUmVzcG9uc2VCdWlsZGVyXzEuZGVmYXVsdC5nZXRSZXNwb25zZUhhbmRsZXIocmVzKS5vbkVycm9yKFwiSW50ZXJuYWxTZXJ2ZXJFcnJvclwiLCBlcnIuc3RhdHVzIHx8IGh0dHBfc3RhdHVzX2NvZGVzXzEuZGVmYXVsdC5JTlRFUk5BTF9TRVJWRVJfRVJST1IsIGVycm9yTWVzc2FnZSwgZXJyb3JEYXRhKV07XG4gICAgICAgIH1cbiAgICB9KTtcbn0pOyB9KTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFDWkEsTUFBTSxDQUFDQyxjQUFjLENBQUNDLE9BQU8sRUFBRSxZQUFZLEVBQUU7RUFBRUMsS0FBSyxFQUFFO0FBQUssQ0FBQyxDQUFDO0FBQzdELElBQUlDLE9BQU8sR0FBR0MsT0FBTyxDQUFDLE9BQU8sQ0FBQztBQUM5QjtBQUNBO0FBQ0E7QUFDQSxJQUFJQyxNQUFNLEdBQUdGLE9BQU8sQ0FBQ0csZUFBZSxDQUFDRixPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDckQsSUFBSUcsSUFBSSxHQUFHSixPQUFPLENBQUNHLGVBQWUsQ0FBQ0YsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2pELElBQUlJLG1CQUFtQixHQUFHTCxPQUFPLENBQUNHLGVBQWUsQ0FBQ0YsT0FBTyxDQUFDLG1C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
