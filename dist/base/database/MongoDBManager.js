"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true,
});
var tslib_1 = require("tslib");
var mongoose_1 = tslib_1.__importDefault(require("mongoose"));
/**
 * Manages connection to MongoDB
 */
var MongoDBManager = /** @class */ (function () {
  function MongoDBManager(_a) {
    var config = _a.config,
      logger = _a.logger;
    var _this = this;
    this.config = config;
    this.logger = logger;
    var user = encodeURIComponent(config.get("db.user"));
    var password = encodeURIComponent(config.get("db.password"));
    var host = config.get("db.host");
    var name = config.get("db.name");
    var auth = config.get("db.auth");
    var connectionString = "mongodb://".concat(host, "/").concat(name);
    if (auth) {
      connectionString = "mongodb+srv://"
        .concat(user, ":")
        .concat(password, "@")
        .concat(host, "/")
        .concat(name, "?retryWrites=true&w=majority");
    }
    this.connectionString = connectionString;
    this.connection = mongoose_1.default.connection;
    mongoose_1.default.set("strictQuery", true);
    if (this.config.get("app.env") === "development") {
      mongoose_1.default.set("debug", true);
    }
    this.connection.on("open", function () {
      return _this.logger.info("Successfully connected to MongoDB");
    });
    this.connection.on("disconnected", function () {
      return _this.logger.info("Disconnected from MongoDB");
    });
    this.connection.on("error", function (error) {
      return _this.logger.error("Error while connecting to MongoDB", error);
    });
  }
  /**
   * Connects to MongoDB
   * @param {number} poolSize - Connection pool size
   * @param {boolean} autoIndex - Use autoIndex
   * @param {number} numOfRetries - Number of connection attempts
   */
  MongoDBManager.prototype.connect = function (poolSize, autoIndex, numOfRetries) {
    if (poolSize === void 0) {
      poolSize = 10;
    }
    if (autoIndex === void 0) {
      autoIndex = true;
    }
    if (numOfRetries === void 0) {
      numOfRetries = 3;
    }
    return tslib_1.__awaiter(this, void 0, void 0, function () {
      var error_1;
      var _this = this;
      return tslib_1.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            this.logger.info("Attempting to connect to MongoDB. Retries left: ".concat(numOfRetries));
            _a.label = 1;
          case 1:
            _a.trys.push([1, 3, , 4]);
            return [
              4 /*yield*/,
              mongoose_1.default.connect(this.connectionString, {
                maxPoolSize: poolSize,
                autoIndex: autoIndex,
              }),
            ];
          case 2:
            _a.sent();
            return [3 /*break*/, 4];
          case 3:
            error_1 = _a.sent();
            this.logger.error("Failed to connected to MongoDB", error_1);
            if (numOfRetries <= 0) {
              this.logger.error("Exhausted max number of retries for connecting to MongoDB");
              process.exit(1);
            }
            setTimeout(function () {
              _this.connect(poolSize, autoIndex, numOfRetries - 1);
            }, 1000);
            return [3 /*break*/, 4];
          case 4:
            return [2 /*return*/];
        }
      });
    });
  };

  MongoDBManager.prototype.close = function () {
    return tslib_1.__awaiter(this, void 0, void 0, function () {
      var _this = this;
      return tslib_1.__generator(this, function (_a) {
        switch (_a.label) {
          case 0:
            this.logger.info("Closing database connection...");
            return [
              4 /*yield*/,
              mongoose_1.default.connection.close().catch(function (error) {
                _this.logger.error("Error while closing MongoDB database", {
                  error: error,
                });
                process.exit(1);
              }),
            ];
          case 1:
            _a.sent();
            return [2 /*return*/];
        }
      });
    });
  };

  return MongoDBManager;
})();
exports.default = MongoDBManager;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInRzbGliXzEiLCJyZXF1aXJlIiwibW9uZ29vc2VfMSIsIl9faW1wb3J0RGVmYXVsdCIsIk1vbmdvREJNYW5hZ2VyIiwiX2EiLCJjb25maWciLCJsb2dnZXIiLCJfdGhpcyIsInVzZXIiLCJlbmNvZGVVUklDb21wb25lbnQiLCJnZXQiLCJwYXNzd29yZCIsImhvc3QiLCJuYW1lIiwiYXV0aCIsImNvbm5lY3Rpb25TdHJpbmciLCJjb25jYXQiLCJjb25uZWN0aW9uIiwiZGVmYXVsdCIsInNldCIsIm9uIiwiaW5mbyIsImVycm9yIiwicHJvdG90eXBlIiwiY29ubmVjdCIsInBvb2xTaXplIiwiYXV0b0luZGV4IiwibnVtT2ZSZXRyaWVzIiwiX19hd2FpdGVyIiwiZXJyb3JfMSIsIl9fZ2VuZXJhdG9yIiwibGFiZWwiLCJ0cnlzIiwicHVzaCIsIm1heFBvb2xTaXplIiwic2VudCIsInByb2Nlc3MiLCJleGl0Iiwic2V0VGltZW91dCIsImNsb3NlIiwiY2F0Y2giXSwic291cmNlcyI6WyIuLi8uLi8uLi90eXBlZC9iYXNlL2RhdGFiYXNlL01vbmdvREJNYW5hZ2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIHRzbGliXzEgPSByZXF1aXJlKFwidHNsaWJcIik7XG52YXIgbW9uZ29vc2VfMSA9IHRzbGliXzEuX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJtb25nb29zZVwiKSk7XG4vKipcbiAqIE1hbmFnZXMgY29ubmVjdGlvbiB0byBNb25nb0RCXG4gKi9cbnZhciBNb25nb0RCTWFuYWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNb25nb0RCTWFuYWdlcihfYSkge1xuICAgICAgICB2YXIgY29uZmlnID0gX2EuY29uZmlnLCBsb2dnZXIgPSBfYS5sb2dnZXI7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlcjtcbiAgICAgICAgdmFyIHVzZXIgPSBlbmNvZGVVUklDb21wb25lbnQoY29uZmlnLmdldChcImRiLnVzZXJcIikpO1xuICAgICAgICB2YXIgcGFzc3dvcmQgPSBlbmNvZGVVUklDb21wb25lbnQoY29uZmlnLmdldChcImRiLnBhc3N3b3JkXCIpKTtcbiAgICAgICAgdmFyIGhvc3QgPSBjb25maWcuZ2V0KFwiZGIuaG9zdFwiKTtcbiAgICAgICAgdmFyIG5hbWUgPSBjb25maWcuZ2V0KFwiZGIubmFtZVwiKTtcbiAgICAgICAgdmFyIGF1dGggPSBjb25maWcuZ2V0KFwiZGIuYXV0aFwiKTtcbiAgICAgICAgdmFyIGNvbm5lY3Rpb25TdHJpbmcgPSBcIm1vbmdvZGI6Ly9cIi5jb25jYXQoaG9zdCwgXCIvXCIpLmNvbmNhdChuYW1lKTtcbiAgICAgICAgaWYgKGF1dGgpIHtcbiAgICAgICAgICAgIGNvbm5lY3Rpb25TdHJpbmcgPSBcIm1vbmdvZGIrc3J2Oi8vXCIuY29uY2F0KHVzZXIsIFwiOlwiKS5jb25jYXQocGFzc3dvcmQsIFwiQFwiKS5jb25jYXQoaG9zdCwgXCIvXCIpLmNvbmNhdChuYW1lLCBcIj9yZXRyeVdyaXRlcz10cnVlJnc9bWFqb3JpdHlcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb25uZWN0aW9uU3RyaW5nID0gY29ubmVjdGlvblN0cmluZztcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gbW9uZ29vc2VfMS5kZWZhdWx0LmNvbm5lY3Rpb247XG4gICAgICAgIG1vbmdvb3NlXzEuZGVmYXVsdC5zZXQoXCJzdHJpY3RRdWVyeVwiLCB0cnVlKTtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmdldChcImFwcC5lbnZcIikgPT09IFwiZGV2ZWxvcG1lbnRcIikge1xuICAgICAgICAgICAgbW9uZ29vc2VfMS5kZWZhdWx0LnNldChcImRlYnVnXCIsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5vbihcIm9wZW5cIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMubG9nZ2VyLmluZm8oXCJTdWNjZXNzZnVsbHkgY29ubmVjdGVkIHRvIE1vbmdvREJcIik7IH0pO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24ub24oXCJkaXNjb25uZWN0ZWRcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMubG9nZ2VyLmluZm8oXCJEaXNjb25uZWN0ZWQgZnJvbSBNb25nb0RCXCIpOyB9KTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLm9uKFwiZXJyb3JcIiwgZnVuY3Rpb24gKGVycm9yKSB7IHJldHVybiBfdGhpcy5sb2dnZXIuZXJyb3IoXCJFcnJvciB3aGlsZSBjb25uZWN0aW5nIHRvIE1vbmdvREJcIiwgZXJyb3IpOyB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29ubmVjdHMgdG8gTW9uZ29EQlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwb29sU2l6ZSAtIENvbm5lY3Rpb24gcG9vbCBzaXplXG4gICAgICogQHBhcmFtIHtib29sZWFufSBhdXRvSW5kZXggLSBVc2UgYXV0b0luZGV4XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG51bU9mUmV0cmllcyAtIE51bWJlciBvZiBjb25uZWN0aW9uIGF0dGVtcHRzXG4gICAgICovXG4gICAgTW9uZ29EQk1hbmFnZXIucHJvdG90eXBlLmNvbm5lY3QgPSBmdW5jdGlvbiAocG9vbFNpemUsIGF1dG9JbmRleCwgbnVtT2ZSZXRyaWVzKSB7XG4gICAgICAgIGlmIChwb29sU2l6ZSA9PT0gdm9pZCAwKSB7IHBvb2xTaXplID0gMTA7IH1cbiAgICAgICAgaWYgKGF1dG9JbmRleCA9PT0gdm9pZCAwKSB7IGF1dG9JbmRleCA9IHRydWU7IH1cbiAgICAgICAgaWYgKG51bU9mUmV0cmllcyA9PT0gdm9pZCAwKSB7IG51bU9mUmV0cmllcyA9IDM7IH1cbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3JfMTtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXCJBdHRlbXB0aW5nIHRvIGNvbm5lY3QgdG8gTW9uZ29EQi4gUmV0cmllcyBsZWZ0OiBcIi5jb25jYXQobnVtT2ZSZXRyaWVzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgMywgLCA0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBtb25nb29zZV8xLmRlZmF1bHQuY29ubmVjdCh0aGlzLmNvbm5lY3Rpb25TdHJpbmcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4UG9vbFNpemU6IHBvb2xTaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvSW5kZXg6IGF1dG9JbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8xID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gY29ubmVjdGVkIHRvIE1vbmdvREJcIiwgZXJyb3JfMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVtT2ZSZXRyaWVzIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihcIkV4aGF1c3RlZCBtYXggbnVtYmVyIG9mIHJldHJpZXMgZm9yIGNvbm5lY3RpbmcgdG8gTW9uZ29EQlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb25uZWN0KHBvb2xTaXplLCBhdXRvSW5kZXgsIG51bU9mUmV0cmllcyAtIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgTW9uZ29EQk1hbmFnZXIucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLmluZm8oXCJDbG9zaW5nIGRhdGFiYXNlIGNvbm5lY3Rpb24uLi5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBtb25nb29zZV8xLmRlZmF1bHQuY29ubmVjdGlvbi5jbG9zZSgpLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5sb2dnZXIuZXJyb3IoXCJFcnJvciB3aGlsZSBjbG9zaW5nIE1vbmdvREIgZGF0YWJhc2VcIiwgeyBlcnJvcjogZXJyb3IgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gTW9uZ29EQk1hbmFnZXI7XG59KCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gTW9uZ29EQk1hbmFnZXI7XG4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBQ1pBLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDQyxPQUFPLEVBQUUsWUFBWSxFQUFFO0VBQUVDLEtBQUssRUFBRTtBQUFLLENBQUMsQ0FBQztBQUM3RCxJQUFJQyxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxPQUFPLENBQUM7QUFDOUIsSUFBSUMsVUFBVSxHQUFHRixPQUFPLENBQUNH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
